<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8"> <!-- Define el conjunto de caracteres -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Ajuste para responsive -->
    <title>Inicia sesión.</title> <!-- Título en la pestaña del navegador -->

    <!-- Enlace a hoja de estilos externa -->
    <link rel="stylesheet" href="css/style.css">

    <!-- Icono de la pestaña -->
    <link rel="icon" type="image/png" href="hotel.jpg">
</head>
<body>
    <!-- Contenedor principal -->
    <div class="principal">
        <!-- Sección de la imagen del hotel -->
        <div class="imagen">
            <img src="hotel.jpg" alt="Imagen de hotel"> 
        </div>

        <!-- Sección del formulario de inicio de sesión -->
        <div class="form">
            <h2>Bienvenido</h2>
            <p>Inicia sesión</p>

            <!-- Formulario de login -->
            <form id="loginForm">
                <label for="email">Correo electrónico:</label><br>
                <input type="email" id="email" required><br>

                <label for="password">Contraseña:</label><br>
                <input type="password" id="password" required><br><br>

                <button type="submit">Iniciar sesión</button>
            </form>

            <!-- Enlace para registrarse -->
            <br>
            <i>¿No tienes cuenta? <a href="registro.html">Registrarte</a></i>
        </div>
    </div>

    <!-- Script para manejar el inicio de sesión -->
    <script>
        // Agrega un evento al formulario cuando se envía
        document.getElementById('loginForm').addEventListener('submit', async function (e) {
            e.preventDefault(); // Evita que la página se recargue al enviar el formulario

            // Obtiene los valores ingresados por el usuario
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            // Envía una solicitud POST al servidor con los datos de login
            const res = await fetch('login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json' // Indica que se envía JSON
                },
                body: JSON.stringify({ email, password }) // Convierte el objeto a texto JSON
            });

            // Espera la respuesta como texto
            const text = await res.text();

            if (res.ok) {
                // Si las credenciales son correctas, muestra un mensaje y redirige
                alert(text);
                window.location.href = 'Principal.html';
            } else {
                // Si hubo error, muestra el mensaje de error
                alert(text);
            }
        });
    </script>
</body>
</html>
